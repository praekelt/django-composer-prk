{% load ultracache_tags composer_tags %}

{% for row in rows %}
    {% comment %}
        TODO: row does not have a modified field, this is too greedy.
    {% endcomment %}
    {% ultracache 3600 'composer_rows' row.id %} 
        <div class="composer-row {{ row.class_name }}">
            {% for column in row.columns %}
                <div class="composer-column composer-column-{{ column.width }} {{ column.class_name }}">
                    {% if column.title %}<div class="title">{{ column.title }}</div>{% endif %}
                    {% for tile in column.tiles %}
                        <div class="composer-tile {{ tile.class_name }} {% if tile.enable_ajax %}composer-enable-ajax{% endif %}"
                             original_url="{% tile_url tile %}">
                            {% tile tile %}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    {% endultracache %}

{% endfor %}
